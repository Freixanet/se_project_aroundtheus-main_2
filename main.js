!function(){"use strict";class e{constructor(e,t){let{data:s,handleImageClick:r}=e;var n,o,i;n=this,i=()=>{this._likeButton.classList.toggle("card__like-button_active")},(o=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var r=s.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(o="_handleLikeIcon"))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i,this._name=s.name,this._link=s.link,this._cardSelector=t,this._handleImageClick=r}_setEventListeners(){this._likeButton=this._element.querySelector(".card__like-button"),this._likeButton.addEventListener("click",this._handleLikeIcon),this._element.querySelector(".card__delete-button").addEventListener("click",(()=>this._handleDeleteCard())),this._element.querySelector(".card__image").addEventListener("click",(()=>this._handleImageClick({link:this._link,name:this._name})))}_handleDeleteCard(){this._element.remove(),this._element=null}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}getView(){this._element=this._getTemplate();const e=this._element.querySelector(".card__image");return e.src=this._link,e.alt=`Photo of ${this._name}`,this._element.querySelector(".card__title").textContent=this._name,this._setEventListeners(),this._element}}class t{constructor(e,t){var s,r,n;s=this,n=()=>Array.from(this._inputList).some(this._checkValidity),(r=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var r=s.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(r="_hasInvalidInput"))in s?Object.defineProperty(s,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[r]=n,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=t,this._inputList=this._form.querySelectorAll(this._inputSelector),this._submitButton=this._form.querySelector(this._submitButtonSelector)}_showInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}disableButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}_enableButton(){this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}_toggleInputState(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_checkValidity(e){return!e.validity.valid}_toggleButtonState(){this._hasInvalidInput()?this.disableButton():this._enableButton()}_setEventListeners(){this.disableButton(),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._toggleInputState(e),this._toggleButtonState()}))}))}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}resetValidation(){this._toggleButtonState(),this._inputList.forEach((e=>{this._hideInputError(e)}))}}class s{constructor(e,t){let{items:s,renderer:r}=e;this._renderedItems=s,this._renderer=r,this._container=document.querySelector(t)}renderItems(){this._renderedItems.forEach((e=>{this._renderer(e)}))}addItem(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]?this._container.prepend(e):this._container.append(e)}}class r{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t),this._closeButton=this._popupElement.querySelector(".modal__close-button"),this._handleEscClose=this._handleEscClose.bind(this)}open(){this._previouslyFocused=document.activeElement,this._popupElement.classList.add("modal_opened");const e=this._popupElement.querySelector('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');e&&e.focus(),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("modal_opened"),this._previouslyFocused&&(this._previouslyFocused.focus(),this._previouslyFocused=null),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose(e){"Escape"===e.key&&this.close()}setEventListeners(){this._popupElement.addEventListener("click",(e=>{e.target===e.currentTarget&&this.close()})),this._closeButton.addEventListener("click",(()=>this.close()))}}class n extends r{constructor(e){super({popupSelector:e}),this._imageElement=this._popupElement.querySelector(".modal__image"),this._imageCaption=this._popupElement.querySelector(".modal__name"),super.setEventListeners()}open(e){this._imageElement.src=e.link,this._imageElement.alt=`Image ${e.name}`,this._imageCaption.textContent=e.name,super.open()}}class o extends r{constructor(e,t){let{errorSelector:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};super({popupSelector:e}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._submitButton=this._popupElement.querySelector(".form__button"),this._formInputs=this._popupForm.querySelectorAll("input"),this._handleFormSubmit=t,this._errorElement=s?this._popupForm.querySelector(s):null}_getInputValues(){const e={};return this._formInputs.forEach((t=>{e[t.name]=t.value})),e}setInputValues(e){this._formInputs.forEach((t=>{e[t.name]&&(t.value=e[t.name])}))}showError(e){this._errorElement&&(this._errorElement.textContent=e)}clearError(){this._errorElement&&(this._errorElement.textContent="")}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())}))}close(){this._popupForm.reset(),this.clearError(),super.close()}}const i=new class{static fetchCardsFromAlternateApi(){return fetch("https://around-api.en.tripleten-services.com/v1/cards",{headers:{authorization:"c56e30dc-2883-4270-a59e-b2f7bae969c6"}}).then((e=>e.json()))}constructor(e){let{baseUrl:t,headers:s}=e;this._baseUrl=t,this._headers=s}_checkResponse(e){return e.ok?e.json():Promise.reject(`Error: ${e.status}`)}getUserInfo(){return fetch(`${this._baseUrl}/users/me`,{headers:this._headers}).then(this._checkResponse)}getInitialCards(){return fetch(`${this._baseUrl}/cards`,{headers:this._headers}).then(this._checkResponse)}setUserInfo(e){let{name:t,about:s}=e;return fetch(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t,about:s})}).then(this._checkResponse)}addCard(e){let{name:t,link:s}=e;return fetch(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:s})}).then(this._checkResponse)}deleteCard(e){return fetch(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers}).then(this._checkResponse)}likeCard(e){return fetch(`${this._baseUrl}/cards/likes/${e}`,{method:"PUT",headers:this._headers}).then(this._checkResponse)}unlikeCard(e){return fetch(`${this._baseUrl}/cards/likes/${e}`,{method:"DELETE",headers:this._headers}).then(this._checkResponse)}setUserAvatar(e){let{avatar:t}=e;return fetch(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:t})}).then(this._checkResponse)}}({baseUrl:"https://around.nomoreparties.co/v1/web_es_11",headers:{authorization:"63780626-9db3-4460-ad06-9b516df8012c","Content-Type":"application/json"}}),a=document.querySelector(".profile__edit-button"),l=document.querySelector(".profile__add-button"),c=(document.querySelector("#name"),document.querySelector("#profession"),document.forms["profile-form"]),h=document.forms["card-form"],u={};var d;d={inputSelector:".form__input",submitButtonSelector:".form__button",inactiveButtonClass:"form__button_disabled",inputErrorClass:"form__input_type_error",errorClass:"form__error_visible",formSelector:"form"},Array.from(document.querySelectorAll(d.formSelector)).forEach((e=>{const s=new t(d,e),r=e.getAttribute("name");u[r]=s,s.enableValidation()}));const _=function(){const e=new n("#image-modal");return e.close(),e}();function m(t){return new e({data:t,handleImageClick:e=>{_.open(e)}},"#card-element").getView()}let p;Promise.all([i.getUserInfo(),i.getInitialCards()]).then((e=>{let[t,r]=e;v.setUserInfo(t.name,t.about),v.setUserAvatar(t.avatar),p=new s({items:r,renderer:e=>{const t=m(e);p.addItem(t)}},".cards__list"),p.renderItems()})).catch((e=>{console.log(e)}));const f=new o("#add-modal",(e=>{i.addCard({name:e.name,link:e.link}).then((e=>{const t=m(e);p.addItem(t,!0),f.close()})).catch((e=>{console.log(e)}))}),{errorSelector:"#add-card-form-error"});l.addEventListener("click",(()=>{u[h.getAttribute("name")].resetValidation(),f.clearError(),f.open()})),f.setEventListeners();const v=new class{constructor(e,t,s){this._name=document.querySelector(e),this._profession=document.querySelector(t),this._avatar=document.querySelector(s)}getUserInfo(){return{name:this._name.textContent,profession:this._profession.textContent}}setUserInfo(e,t){this._name.textContent=e,this._profession.textContent=t}setUserAvatar(e){this._avatar.src=e}}(".profile__name",".profile__profession",".profile__image"),b=new o("#edit-modal",(e=>{i.setUserInfo({name:e.name,about:e.profession}).then((e=>{v.setUserInfo(e.name,e.about),b.close()})).catch((e=>{console.log(e)}))}));a.addEventListener("click",(()=>{const e=v.getUserInfo();b.setInputValues(e),u[c.getAttribute("name")].disableButton(),b.open()})),b.setEventListeners()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Y3BHLE1BQU0sSUFJdEJvRyxFQUFjNUYsbUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcbiAgY29uc3RydWN0b3IoeyBkYXRhLCBoYW5kbGVJbWFnZUNsaWNrIH0sIGNhcmRTZWxlY3Rvcikge1xuICAgIHRoaXMuX25hbWUgPSBkYXRhLm5hbWU7XG4gICAgdGhpcy5fbGluayA9IGRhdGEubGluaztcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XG4gICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayA9IGhhbmRsZUltYWdlQ2xpY2s7XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fbGlrZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKTtcbiAgICB0aGlzLl9saWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9oYW5kbGVMaWtlSWNvbik7XG5cbiAgICBjb25zdCBkZWxldGVCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fZGVsZXRlLWJ1dHRvblwiKTtcbiAgICBkZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuX2hhbmRsZURlbGV0ZUNhcmQoKSk7XG5cbiAgICB0aGlzLl9lbGVtZW50XG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKVxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PlxuICAgICAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrKHsgbGluazogdGhpcy5fbGluaywgbmFtZTogdGhpcy5fbmFtZSB9KVxuICAgICAgKTtcbiAgfVxuXG4gIF9oYW5kbGVMaWtlSWNvbiA9ICgpID0+IHtcbiAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XG4gIH07XG5cbiAgX2hhbmRsZURlbGV0ZUNhcmQoKSB7XG4gICAgdGhpcy5fZWxlbWVudC5yZW1vdmUoKTtcbiAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDtcbiAgfVxuXG4gIF9nZXRUZW1wbGF0ZSgpIHtcbiAgICByZXR1cm4gZG9jdW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKVxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcbiAgfVxuXG4gIGdldFZpZXcoKSB7XG4gICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XG4gICAgY29uc3QgY2FyZEltYWdlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xuICAgIGNhcmRJbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xuICAgIGNhcmRJbWFnZS5hbHQgPSBgUGhvdG8gb2YgJHt0aGlzLl9uYW1lfWA7XG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3Ioc2V0dGluZ3MsIGZvcm1FbGVtZW50KSB7XG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IHNldHRpbmdzLmlucHV0U2VsZWN0b3I7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBzZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcztcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBzZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3M7XG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IHNldHRpbmdzLmVycm9yQ2xhc3M7XG5cbiAgICB0aGlzLl9mb3JtID0gZm9ybUVsZW1lbnQ7XG4gICAgdGhpcy5faW5wdXRMaXN0ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3Rvcih0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3Rvcik7XG4gIH1cblxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XG4gICAgLy8gR2VuZXJhdGUgdGhlIGlkIGZvciBlcnJvciBmb3IgdGhlIHRhcmdldCBlbGVtZW50XG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihcbiAgICAgIGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxuICAgICk7XG5cbiAgICAvLyBBZGQgdGhlIGlucHV0IGVycm9yIGNsYXNzIHRvIHRoZSBlbGVtZW50J3MgY2xhc3MgbGlzdFxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG5cbiAgICAvLyBDaGFuZ2UgdGhlIHRleHQgY29udGVudCB0byB0aGUgZXJyb3IgbWVzc2FnZVxuICAgIGVycm9yTWVzc2FnZUVsZW1lbnQudGV4dENvbnRlbnQgPSBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2U7XG5cbiAgICAvLyBBZGQgdGhlIGVycm9yIGNsYXNzIHRvIHRoZSBlcnJvciBtZXNzYWdlJ3MgY2xhc3MgbGlzdFxuICAgIGVycm9yTWVzc2FnZUVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcbiAgfVxuXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcbiAgICAvLyBHZW5lcmF0ZSB0aGUgaWQgZm9yIGVycm9yIGZvciB0aGUgdGFyZ2V0IGVsZW1lbnRcbiAgICBjb25zdCBlcnJvck1lc3NhZ2VFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKFxuICAgICAgYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXG4gICAgKTtcblxuICAgIC8vIEFkZCB0aGUgaW5wdXQgZXJyb3IgY2xhc3MgdG8gdGhlIGVsZW1lbnQncyBjbGFzcyBsaXN0XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcblxuICAgIC8vIENsZWFyIHRoZSBlcnJvciBtZXNzYWdlIGZyb20gdGhlIHRleHQgY29udGVudFxuICAgIGVycm9yTWVzc2FnZUVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xuXG4gICAgLy8gQWRkIHRoZSBlcnJvciBjbGFzcyB0byB0aGUgZXJyb3IgbWVzc2FnZSdzIGNsYXNzIGxpc3RcbiAgICBlcnJvck1lc3NhZ2VFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XG4gIH1cblxuICAvLyBEaXNhYmxlIGZvcm0gYnV0dG9uXG4gIGRpc2FibGVCdXR0b24oKSB7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgfVxuXG4gIC8vIEVuYWJsZSBmb3JtIGJ1dHRvblxuICBfZW5hYmxlQnV0dG9uKCkge1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuICB9XG5cbiAgLy8gU2hvdyBvciBoaWRlIGlucHV0IGVycm9ycyBiYXNlZCBvbiB0aGUgY3VycmVudCBpbnB1dCBlbGVtZW50J3MgdmFsaWRpdHlcbiAgX3RvZ2dsZUlucHV0U3RhdGUoaW5wdXRFbGVtZW50KSB7XG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIC8vIElmIGlucHV0IGVsZW1lbnQgaXMgaW52YWxpZCwgc2hvdyBpbnB1dCBlcnJvciBtZXNzYWdlXG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBPdGhlcndpc2UsIGhpZGUgaW5wdXQgZXJyb3IgbWVzc2FnZVxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9XG4gIH1cblxuICAvLyBDaGVjayBpZiB0aGUgaW5wdXQgZWxlbWVudCBpcyBpbnZhbGlkXG4gIF9jaGVja1ZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xuICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xuICB9XG5cbiAgLy8gQ2hlY2sgaWYgYW55IGVsZW1lbnQgaW4gdGhlIGlucHV0IGxpc3QgaXMgaW52YWxpZFxuICAvLyBSZWZlcmVuY2UgKDEpOiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9BcnJheS9zb21lXG4gIC8vIFJlZmVyZW5jZSAoMik6IGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0FycmF5L2Zyb21cbiAgX2hhc0ludmFsaWRJbnB1dCA9ICgpID0+XG4gICAgQXJyYXkuZnJvbSh0aGlzLl9pbnB1dExpc3QpLnNvbWUodGhpcy5fY2hlY2tWYWxpZGl0eSk7XG5cbiAgLy8gVG9nZ2xlIGJ1dHRvbiBkZXBlbmRpbmcgb24gdGhlIGlucHV0J3MgdmFsaWRpdHlcbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xuICAgIC8vIElmIHRoZSBpbnB1dCBpcyB2YWxpZCwgZGlzYWJsZSB0aGUgYnV0dG9uXG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XG4gICAgICB0aGlzLmRpc2FibGVCdXR0b24oKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gT3RoZXJ3aXNlLCBlbmFibGUgdGhlIGJ1dHRvblxuICAgICAgdGhpcy5fZW5hYmxlQnV0dG9uKCk7XG4gICAgfVxuICB9XG5cbiAgLy8gU2V0IGV2ZW50IGxpc3RlbmVycyBmb3IgZm9ybSBlbGVtZW50cyBiYXNlZCBvbiB0aGUgdXNlciBpbnB1dHMnIHZhbGlkaXR5XG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICAvLyBEaXNhYmxlIGJ1dHRvblxuICAgIHRoaXMuZGlzYWJsZUJ1dHRvbigpO1xuXG4gICAgLy8gTGlzdGVuIGZvciB0aGUgXCJ0eXBlXCIgZXZlbnQgb24gZWFjaCBpbnB1dFxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLl90b2dnbGVJbnB1dFN0YXRlKGlucHV0RWxlbWVudCk7XG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8vIFZhbGlkYXRlIGZvcm1cbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2ZW50KSA9PiB7XG4gICAgICAvLyBQcmV2ZW50IHRoZSBmb3JtJ3MgZGVmYXVsdCBiZWhhdmlvdXJcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSk7XG5cbiAgICAvLyBTZXQgZXZlbnQgbGlzdGVuZXJzXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxuXG4gIHJlc2V0VmFsaWRhdGlvbigpIHtcbiAgICAvLyBSZXNldCBzdWJtaXQgYnV0dG9uXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcblxuICAgIC8vIENsZWFyIGVycm9yIG1lc3NhZ2VzXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9KTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XG4gICAgdGhpcy5fcmVuZGVyZWRJdGVtcyA9IGl0ZW1zO1xuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XG4gIH1cblxuICByZW5kZXJJdGVtcygpIHtcbiAgICAvLyBSZW5kZXJzIGFsbCBlbGVtZW50cyBvbiB0aGUgcGFnZVxuICAgIHRoaXMuX3JlbmRlcmVkSXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XG4gICAgfSk7XG4gIH1cblxuICBhZGRJdGVtKGVsZW1lbnQsIHByZXBlbmQgPSBmYWxzZSkge1xuICAgIC8vIEFkZHMgdGhlIERPTSBlbGVtZW50IHRvIHRoZSBjb250YWluZXJcbiAgICBpZiAocHJlcGVuZCkge1xuICAgICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2NvbnRhaW5lci5hcHBlbmQoZWxlbWVudCk7XG4gICAgfVxuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciB9KSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9jbG9zZUJ1dHRvbiA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgXCIubW9kYWxfX2Nsb3NlLWJ1dHRvblwiXG4gICAgKTtcblxuICAgIC8vIEJpbmQgdGhlIF9oYW5kbGVFc2NDbG9zZSBtZXRob2QgdG8gdGhpcyBpbnN0YW5jZSBvbmNlLlxuICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcbiAgfVxuXG4gIG9wZW4oKSB7XG4gICAgLy8gR3VhcmRhciBlbCBlbGVtZW50byBxdWUgdGVuw61hIGVsIGZvY28gYW50ZXMgZGUgYWJyaXIgZWwgbW9kYWxcbiAgICB0aGlzLl9wcmV2aW91c2x5Rm9jdXNlZCA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7XG4gICAgLy8gb3BlbiBwb3B1cFxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfb3BlbmVkXCIpO1xuXG4gICAgLy8gTW92ZXIgZWwgZm9jbyBhbCBwcmltZXIgYm90w7NuIGRlbCBwb3B1cFxuICAgIGNvbnN0IGZvY3VzYWJsZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgJ2J1dHRvbiwgW2hyZWZdLCBpbnB1dCwgc2VsZWN0LCB0ZXh0YXJlYSwgW3RhYmluZGV4XTpub3QoW3RhYmluZGV4PVwiLTFcIl0pJ1xuICAgICk7XG4gICAgaWYgKGZvY3VzYWJsZSkgZm9jdXNhYmxlLmZvY3VzKCk7XG5cbiAgICAvLyBBZGQgbGlzdGVuZXIgZm9yIHRoZSBcIkVzY2FwZVwiIGtleSBldmVudFxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIC8vIGNsb3NlIHBvcHVwXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XG5cbiAgICAvLyBSZXN0YXVyYXIgZWwgZm9jbyBhbCBlbGVtZW50byBhbnRlcmlvclxuICAgIGlmICh0aGlzLl9wcmV2aW91c2x5Rm9jdXNlZCkge1xuICAgICAgdGhpcy5fcHJldmlvdXNseUZvY3VzZWQuZm9jdXMoKTtcbiAgICAgIHRoaXMuX3ByZXZpb3VzbHlGb2N1c2VkID0gbnVsbDtcbiAgICB9XG5cbiAgICAvLyBSZW1vdmUgbGlzdGVuZXIgZm9yIHRoZSBcIkVzY2FwZVwiIGtleSBldmVudFxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgfVxuXG4gIF9oYW5kbGVFc2NDbG9zZShldmVudCkge1xuICAgIC8vIFByZXZlbnQgZGVmYXVsdCBhbmQgaWYgZXZlbnQgd2FzIG9uIEVTQyBidXR0b24gY2FsbCB0aGUgXCJjbG9zZVwiIG1ldGhvZFxuICAgIGlmIChldmVudC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICAvLyBDbG9zZSB0aGUgcG9wdXAgd2hlbiB1c2VycyBjbGljayBvbiB0aGUgc2hhZGVkIGFyZWEgb3V0c2lkZSB0aGUgbW9kYWxcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldmVudCkgPT4ge1xuICAgICAgaWYgKGV2ZW50LnRhcmdldCA9PT0gZXZlbnQuY3VycmVudFRhcmdldCkge1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBDbG9zZSB0aGUgcG9wdXAgd2hlbiB1c2VycyBjbGljayBvbiB0aGUgJ2Nsb3NlJyBidXR0b25cbiAgICB0aGlzLl9jbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5jbG9zZSgpKTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xuICAgIHRoaXMuX2ltYWdlRWxlbWVudCA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWFnZVwiKTtcbiAgICB0aGlzLl9pbWFnZUNhcHRpb24gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fbmFtZVwiKTtcblxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cblxuICBvcGVuKGltYWdlRGF0YSkge1xuICAgIHRoaXMuX2ltYWdlRWxlbWVudC5zcmMgPSBpbWFnZURhdGEubGluaztcbiAgICB0aGlzLl9pbWFnZUVsZW1lbnQuYWx0ID0gYEltYWdlICR7aW1hZ2VEYXRhLm5hbWV9YDtcbiAgICB0aGlzLl9pbWFnZUNhcHRpb24udGV4dENvbnRlbnQgPSBpbWFnZURhdGEubmFtZTtcbiAgICBzdXBlci5vcGVuKCk7XG4gIH1cbn1cbiIsIi8vIC4uLmV4aXN0aW5nIGNvZGUuLi5cbmltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0LCB7IGVycm9yU2VsZWN0b3IgfSA9IHt9KSB7XG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xuICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2J1dHRvblwiKTtcbiAgICB0aGlzLl9mb3JtSW5wdXRzID0gdGhpcy5fcG9wdXBGb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCJpbnB1dFwiKTtcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcbiAgICB0aGlzLl9lcnJvckVsZW1lbnQgPSBlcnJvclNlbGVjdG9yXG4gICAgICA/IHRoaXMuX3BvcHVwRm9ybS5xdWVyeVNlbGVjdG9yKGVycm9yU2VsZWN0b3IpXG4gICAgICA6IG51bGw7XG4gIH1cblxuICAvLyBDb2xsZWN0cyBkYXRhIGZyb20gYWxsIHRoZSBpbnB1dCBmaWVsZHMgYW5kIHJldHVybnMgdGhlIGRhdGEgYXMgYW4gb2JqZWN0XG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICAvLyBNYWtlIGEgaW5wdXQgZGF0YSBvYmplY3RcbiAgICBjb25zdCBpbnB1dE9iamVjdCA9IHt9O1xuXG4gICAgLy8gTmFtZSBlYWNoIGlucHV0IGJ5IGl0cyB2YWx1ZVxuICAgIHRoaXMuX2Zvcm1JbnB1dHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgIGlucHV0T2JqZWN0W2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XG4gICAgfSk7XG5cbiAgICAvLyBSZXR1cm4gdGhlIGRhdGEgYXMgYW4gb2JqZWN0XG4gICAgcmV0dXJuIGlucHV0T2JqZWN0O1xuICB9XG5cbiAgLy8gVXNlIHRoZSBkYXRhIG9iamVjdCB0byBzZXQgdGhlIHZhbHVlcyBvZiB0aGUgZm9ybSBpbnB1dHNcbiAgc2V0SW5wdXRWYWx1ZXMoZGF0YSkge1xuICAgIHRoaXMuX2Zvcm1JbnB1dHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgIC8vIENoZWNrIGlmIHRoZSBpbnB1dCBuYW1lIGV4aXN0cyBhcyBhIGtleSBpbiB0aGUgZGF0YSBvYmplY3RcbiAgICAgIGlmIChkYXRhW2lucHV0Lm5hbWVdKSB7XG4gICAgICAgIC8vIElmIGl0IGV4aXN0cywgc2V0IHRoZSBpbnB1dCdzIHZhbHVlIHRvIHRoZSBjb3JyZXNwb25kaW5nIHZhbHVlIGZyb20gdGhlIGRhdGEgb2JqZWN0XG4gICAgICAgIGlucHV0LnZhbHVlID0gZGF0YVtpbnB1dC5uYW1lXTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHNob3dFcnJvcihtZXNzYWdlKSB7XG4gICAgaWYgKHRoaXMuX2Vycm9yRWxlbWVudCkge1xuICAgICAgdGhpcy5fZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gbWVzc2FnZTtcbiAgICB9XG4gIH1cblxuICBjbGVhckVycm9yKCkge1xuICAgIGlmICh0aGlzLl9lcnJvckVsZW1lbnQpIHtcbiAgICAgIHRoaXMuX2Vycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XG4gICAgfVxuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgLy8gQWRkIHRoZSAnY2xpY2snIGV2ZW50IGxpc3RlbmVyIHRvIHRoZSBjbG9zZSBpY29uXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuICAgIC8vIEFkZCB0aGUgJ3N1Ym1pdCcgZXZlbnQgaGFuZGxlciB0byB0aGUgZm9ybVxuICAgIHRoaXMuX3BvcHVwRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldmVudCkgPT4ge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XG4gICAgfSk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICAvLyBSZXNldCB0aGUgZm9ybVxuICAgIHRoaXMuX3BvcHVwRm9ybS5yZXNldCgpO1xuICAgIHRoaXMuY2xlYXJFcnJvcigpO1xuXG4gICAgLy8gQ2xvc2UgdGhlIGZvcm1cbiAgICBzdXBlci5jbG9zZSgpO1xuICB9XG59XG4iLCJpbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xuaW1wb3J0IHsgc2VsZWN0b3JzLCB2YWxpZGF0aW9uU2V0dGluZ3MgfSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzXCI7XG5cbi8vIEltcG9ydCBhbGwgdGhlIGNsYXNzZXNcbmltcG9ydCBBcGkgZnJvbSBcIi4uL2NvbXBvbmVudHMvQXBpXCI7XG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkXCI7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yXCI7XG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uXCI7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2VcIjtcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm1cIjtcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mb1wiO1xuXG4vLyBBUEkgaW5zdGFudGlhdGlvblxuY29uc3QgYXBpID0gbmV3IEFwaSh7XG4gIGJhc2VVcmw6IFwiaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS93ZWJfZXNfMTFcIixcbiAgaGVhZGVyczoge1xuICAgIGF1dGhvcml6YXRpb246IFwiNjM3ODA2MjYtOWRiMy00NDYwLWFkMDYtOWI1MTZkZjgwMTJjXCIsXG4gICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gIH0sXG59KTtcblxuLy8gSWRlbnRpZnkgZWRpdCwgYWRkIGFuZCBjbG9zZSBidXR0b25zIGFzIGVsZW1lbnRzXG5jb25zdCBlZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19lZGl0LWJ1dHRvblwiKTtcbmNvbnN0IGFkZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcblxuLy8gRmluZCBlZGl0IGZvcm0gaW5wdXQgZWxlbWVudHNcbmNvbnN0IGZvcm1JbnB1dE5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI25hbWVcIik7XG5jb25zdCBmb3JtSW5wdXRQcm9mZXNzaW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9mZXNzaW9uXCIpO1xuXG4vLyBGaW5kIGZvcm0gZWxlbWVudHNcbmNvbnN0IHByb2ZpbGVGb3JtID0gZG9jdW1lbnQuZm9ybXNbXCJwcm9maWxlLWZvcm1cIl07XG5jb25zdCBhZGRDYXJkRm9ybSA9IGRvY3VtZW50LmZvcm1zW1wiY2FyZC1mb3JtXCJdO1xuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRm9ybSBWYWxpZGF0aW9uICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbi8vIEluaWNpYWxpemEgeSBhbG1hY2VuYSBsb3MgdmFsaWRhZG9yZXMgZGUgZm9ybXVsYXJpb3NcbmNvbnN0IGZvcm1WYWxpZGF0b3JzID0ge307XG5mdW5jdGlvbiBpbml0aWFsaXplRm9ybVZhbGlkYXRvcnMoc2V0dGluZ3MpIHtcbiAgY29uc3QgZm9ybUxpc3QgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2V0dGluZ3MuZm9ybVNlbGVjdG9yKSk7XG4gIGZvcm1MaXN0LmZvckVhY2goKGZvcm1FbGVtZW50KSA9PiB7XG4gICAgY29uc3QgdmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3Ioc2V0dGluZ3MsIGZvcm1FbGVtZW50KTtcbiAgICBjb25zdCBmb3JtTmFtZSA9IGZvcm1FbGVtZW50LmdldEF0dHJpYnV0ZShcIm5hbWVcIik7XG4gICAgZm9ybVZhbGlkYXRvcnNbZm9ybU5hbWVdID0gdmFsaWRhdG9yO1xuICAgIHZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG4gIH0pO1xufVxuaW5pdGlhbGl6ZUZvcm1WYWxpZGF0b3JzKHZhbGlkYXRpb25TZXR0aW5ncyk7XG5cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBvcHVwIEltYWdlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuLy8gSW5pY2lhbGl6YSBlbCBwb3B1cCBkZSBpbWFnZW5cbmZ1bmN0aW9uIGluaXRpYWxpemVJbWFnZVBvcHVwKCkge1xuICBjb25zdCBwb3B1cCA9IG5ldyBQb3B1cFdpdGhJbWFnZShzZWxlY3RvcnMucHJldmlld1BvcHVwKTtcbiAgcG9wdXAuY2xvc2UoKTtcbiAgcmV0dXJuIHBvcHVwO1xufVxuY29uc3QgY2FyZFByZXZpZXdQb3B1cCA9IGluaXRpYWxpemVJbWFnZVBvcHVwKCk7XG5cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2FyZCBTZWN0aW9uICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuLy8gVGhpcyBmdW5jdGlvbiBjcmVhdGVzIGEgbmV3IGNhcmRcbmZ1bmN0aW9uIGNyZWF0ZUNhcmQoZGF0YSkge1xuICBjb25zdCBjYXJkRWxlbWVudCA9IG5ldyBDYXJkKFxuICAgIHtcbiAgICAgIGRhdGEsXG4gICAgICBoYW5kbGVJbWFnZUNsaWNrOiAoaW1hZ2VEYXRhKSA9PiB7XG4gICAgICAgIGNhcmRQcmV2aWV3UG9wdXAub3BlbihpbWFnZURhdGEpO1xuICAgICAgfSxcbiAgICB9LFxuICAgIHNlbGVjdG9ycy5jYXJkVGVtcGxhdGVcbiAgKTtcblxuICByZXR1cm4gY2FyZEVsZW1lbnQuZ2V0VmlldygpO1xufVxuXG4vLyBJbmljaWFsaXphIGxhIHNlY2Npw7NuIGRlIHRhcmpldGFzXG5sZXQgY2FyZFNlY3Rpb247XG5cblByb21pc2UuYWxsKFthcGkuZ2V0VXNlckluZm8oKSwgYXBpLmdldEluaXRpYWxDYXJkcygpXSlcbiAgLnRoZW4oKFt1c2VyRGF0YSwgaW5pdGlhbENhcmRzXSkgPT4ge1xuICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHVzZXJEYXRhLm5hbWUsIHVzZXJEYXRhLmFib3V0KTtcbiAgICB1c2VySW5mby5zZXRVc2VyQXZhdGFyKHVzZXJEYXRhLmF2YXRhcik7XG5cbiAgICBjYXJkU2VjdGlvbiA9IG5ldyBTZWN0aW9uKFxuICAgICAge1xuICAgICAgICBpdGVtczogaW5pdGlhbENhcmRzLFxuICAgICAgICByZW5kZXJlcjogKGRhdGEpID0+IHtcbiAgICAgICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGNyZWF0ZUNhcmQoZGF0YSk7XG4gICAgICAgICAgY2FyZFNlY3Rpb24uYWRkSXRlbShjYXJkRWxlbWVudCk7XG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAgc2VsZWN0b3JzLmNhcmRzTGlzdFxuICAgICk7XG4gICAgY2FyZFNlY3Rpb24ucmVuZGVySXRlbXMoKTtcbiAgfSlcbiAgLmNhdGNoKChlcnIpID0+IHtcbiAgICBjb25zb2xlLmxvZyhlcnIpO1xuICB9KTtcblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbi8qICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFkZCBGb3JtICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5jb25zdCBhZGRGb3JtUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcbiAgc2VsZWN0b3JzLmFkZEZvcm1Qb3B1cCxcbiAgKGZvcm1EYXRhKSA9PiB7XG4gICAgYXBpXG4gICAgICAuYWRkQ2FyZCh7IG5hbWU6IGZvcm1EYXRhLm5hbWUsIGxpbms6IGZvcm1EYXRhLmxpbmsgfSlcbiAgICAgIC50aGVuKChuZXdDYXJkRGF0YSkgPT4ge1xuICAgICAgICBjb25zdCBuZXdDYXJkID0gY3JlYXRlQ2FyZChuZXdDYXJkRGF0YSk7XG4gICAgICAgIGNhcmRTZWN0aW9uLmFkZEl0ZW0obmV3Q2FyZCwgdHJ1ZSk7IC8vIFByZXBlbmQgdGhlIG5ldyBjYXJkXG4gICAgICAgIGFkZEZvcm1Qb3B1cC5jbG9zZSgpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICB9KTtcbiAgfSxcbiAge1xuICAgIGVycm9yU2VsZWN0b3I6IFwiI2FkZC1jYXJkLWZvcm0tZXJyb3JcIixcbiAgfVxuKTtcblxuLy8gT3BlbiB0aGUgbW9kYWwgd2hlbiB1c2VycyBjbGljayBvbiB0aGUgYWRkIGJ1dHRvblxuYWRkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIC8vIFJlc2V0IHZhbGlkYXRpb24gZm9yIHRoZSBhZGQgY2FyZCBmb3JtXG4gIGZvcm1WYWxpZGF0b3JzW2FkZENhcmRGb3JtLmdldEF0dHJpYnV0ZShcIm5hbWVcIildLnJlc2V0VmFsaWRhdGlvbigpO1xuICBhZGRGb3JtUG9wdXAuY2xlYXJFcnJvcigpO1xuICAvLyBPcGVuIHRoZSBhZGQgY2FyZCBmb3JtXG4gIGFkZEZvcm1Qb3B1cC5vcGVuKCk7XG59KTtcblxuLy8gU2V0IGFkZCBmb3JtIGV2ZW50IGxpc3RlbmVyc1xuYWRkRm9ybVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUHJvZmlsZSBJbmZvcm1hdGlvbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuLy8gQ3JlYXRlIHRoZSB1c2VyIGluZm8gaW5zdGFuY2VcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKFxuICBzZWxlY3RvcnMucHJvZmlsZU5hbWUsXG4gIHNlbGVjdG9ycy5wcm9maWxlUHJvZmVzc2lvbixcbiAgc2VsZWN0b3JzLnByb2ZpbGVBdmF0YXJcbik7XG5cbi8vIENyZWF0ZSB0aGUgZWRpdCBmb3JtIGluc3RhbmNlXG5jb25zdCBlZGl0Rm9ybVBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oc2VsZWN0b3JzLmVkaXRGb3JtUG9wdXAsICh2YWx1ZXMpID0+IHtcbiAgYXBpXG4gICAgLnNldFVzZXJJbmZvKHsgbmFtZTogdmFsdWVzLm5hbWUsIGFib3V0OiB2YWx1ZXMucHJvZmVzc2lvbiB9KVxuICAgIC50aGVuKCh1cGRhdGVkVXNlcikgPT4ge1xuICAgICAgdXNlckluZm8uc2V0VXNlckluZm8odXBkYXRlZFVzZXIubmFtZSwgdXBkYXRlZFVzZXIuYWJvdXQpO1xuICAgICAgZWRpdEZvcm1Qb3B1cC5jbG9zZSgpO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgfSk7XG59KTtcblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbi8qICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVkaXQgRm9ybSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4vLyBPcGVuIHRoZSBtb2RhbCB3aGVuIHVzZXJzIGNsaWNrIG9uIHRoZSBlZGl0IGJ1dHRvblxuZWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAvLyBHZXQgcHJvZmlsZSBpbmZvIGFuZCBhZGQgdG8gdGhlIGZvcm0gZmllbGRzXG4gIGNvbnN0IHByb2ZpbGVJbmZvID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcblxuICAvLyBBZGQgdGhlIHByb2ZpbGUgaW5mbyBvbiB0aGUgcGFnZSB0byB0aGUgZm9ybSdzIGZpZWxkc1xuICBlZGl0Rm9ybVBvcHVwLnNldElucHV0VmFsdWVzKHByb2ZpbGVJbmZvKTtcblxuICAvLyBEaXNhYmxlIGJ1dHRvbiBlYWNoIHRpbWUgaXQgb3BlbnNcbiAgZm9ybVZhbGlkYXRvcnNbcHJvZmlsZUZvcm0uZ2V0QXR0cmlidXRlKFwibmFtZVwiKV0uZGlzYWJsZUJ1dHRvbigpO1xuXG4gIC8vIE9wZW4gbW9kYWxcbiAgZWRpdEZvcm1Qb3B1cC5vcGVuKCk7XG59KTtcblxuLy8gU2V0IGVkaXQgZm9ybSBldmVudCBsaXN0ZW5lcnNcbmVkaXRGb3JtUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XG4gIC8vIEZldGNoIGNhcmRzIGZyb20gYWx0ZXJuYXRlIEFQSSBlbmRwb2ludCAoc3RhdGljIG1ldGhvZClcbiAgLy8gRmV0Y2ggY2FyZHMgZnJvbSBhbHRlcm5hdGUgQVBJIGVuZHBvaW50IChzdGF0aWMgbWV0aG9kKVxuICBzdGF0aWMgZmV0Y2hDYXJkc0Zyb21BbHRlcm5hdGVBcGkoKSB7XG4gICAgcmV0dXJuIGZldGNoKFwiaHR0cHM6Ly9hcm91bmQtYXBpLmVuLnRyaXBsZXRlbi1zZXJ2aWNlcy5jb20vdjEvY2FyZHNcIiwge1xuICAgICAgaGVhZGVyczoge1xuICAgICAgICBhdXRob3JpemF0aW9uOiBcImM1NmUzMGRjLTI4ODMtNDI3MC1hNTllLWIyZjdiYWU5NjljNlwiLFxuICAgICAgfSxcbiAgICB9KS50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpO1xuICB9XG4gIGNvbnN0cnVjdG9yKHsgYmFzZVVybCwgaGVhZGVycyB9KSB7XG4gICAgdGhpcy5fYmFzZVVybCA9IGJhc2VVcmw7XG4gICAgdGhpcy5faGVhZGVycyA9IGhlYWRlcnM7XG4gIH1cblxuICBfY2hlY2tSZXNwb25zZShyZXMpIHtcbiAgICBpZiAocmVzLm9rKSB7XG4gICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICB9XG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICB9XG5cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xuICB9XG5cbiAgZ2V0SW5pdGlhbENhcmRzKCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcbiAgfVxuXG4gIHNldFVzZXJJbmZvKHsgbmFtZSwgYWJvdXQgfSkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZSxcbiAgICAgICAgYWJvdXQsXG4gICAgICB9KSxcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xuICB9XG5cbiAgYWRkQ2FyZCh7IG5hbWUsIGxpbmsgfSkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBuYW1lLFxuICAgICAgICBsaW5rLFxuICAgICAgfSksXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcbiAgfVxuXG4gIGRlbGV0ZUNhcmQoY2FyZElkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfWAsIHtcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcbiAgfVxuXG4gIGxpa2VDYXJkKGNhcmRJZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy9saWtlcy8ke2NhcmRJZH1gLCB7XG4gICAgICBtZXRob2Q6IFwiUFVUXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XG4gIH1cblxuICB1bmxpa2VDYXJkKGNhcmRJZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy9saWtlcy8ke2NhcmRJZH1gLCB7XG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XG4gIH1cblxuICBzZXRVc2VyQXZhdGFyKHsgYXZhdGFyIH0pIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBhdmF0YXIsXG4gICAgICB9KSxcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xuICB9XG59XG4iLCJleHBvcnQgY29uc3Qgc2VsZWN0b3JzID0ge1xuICBjYXJkc0xpc3Q6IFwiLmNhcmRzX19saXN0XCIsXG4gIGNhcmRUZW1wbGF0ZTogXCIjY2FyZC1lbGVtZW50XCIsXG4gIHByZXZpZXdQb3B1cDogXCIjaW1hZ2UtbW9kYWxcIixcbiAgZWRpdEZvcm1Qb3B1cDogXCIjZWRpdC1tb2RhbFwiLFxuICBhZGRGb3JtUG9wdXA6IFwiI2FkZC1tb2RhbFwiLFxuICBwcm9maWxlTmFtZTogXCIucHJvZmlsZV9fbmFtZVwiLFxuICBwcm9maWxlUHJvZmVzc2lvbjogXCIucHJvZmlsZV9fcHJvZmVzc2lvblwiLFxuICBwcm9maWxlQXZhdGFyOiBcIi5wcm9maWxlX19pbWFnZVwiLFxuICBmb3JtTW9kYWxDb250YWluZXI6IFwiLm1vZGFsX19jb250YWluZXJcIixcbiAgaW1hZ2VNb2RhbENvbnRhaW5lcjogXCIubW9kYWxfX3BvcHVwXCIsXG4gIGZvcm1JbnB1dE5hbWU6IFwiI25hbWVcIixcbiAgZm9ybUlucHV0UHJvZmVzc2lvbjogXCIjcHJvZmVzc2lvblwiLFxufTtcblxuZXhwb3J0IGNvbnN0IHZhbGlkYXRpb25TZXR0aW5ncyA9IHtcbiAgaW5wdXRTZWxlY3RvcjogXCIuZm9ybV9faW5wdXRcIixcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLmZvcm1fX2J1dHRvblwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcImZvcm1fX2J1dHRvbl9kaXNhYmxlZFwiLFxuICBpbnB1dEVycm9yQ2xhc3M6IFwiZm9ybV9faW5wdXRfdHlwZV9lcnJvclwiLFxuICBlcnJvckNsYXNzOiBcImZvcm1fX2Vycm9yX3Zpc2libGVcIixcbiAgZm9ybVNlbGVjdG9yOiBcImZvcm1cIixcbn07XG5cbmV4cG9ydCBjb25zdCBlcnJvck1lc3NhZ2VzID0ge1xuICBpbnZhbGlkVXJsOiBcIlBsZWFzZSBlbnRlciBhIHZhbGlkIGltYWdlIFVSTCAobXVzdCBzdGFydCB3aXRoIGh0dHAgb3IgaHR0cHMpLlwiLFxuICBpbWFnZU5vdEZvdW5kOiBcIlRoZSBVUkwgZG9lcyBub3QgbG9hZCBhIHZhbGlkIGltYWdlLlwiLFxufTtcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3IobmFtZVNlbGVjdG9yLCBwcm9mZXNzaW9uU2VsZWN0b3IsIGF2YXRhclNlbGVjdG9yKSB7XG4gICAgdGhpcy5fbmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZVNlbGVjdG9yKTtcbiAgICB0aGlzLl9wcm9mZXNzaW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwcm9mZXNzaW9uU2VsZWN0b3IpO1xuICAgIHRoaXMuX2F2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYXZhdGFyU2VsZWN0b3IpO1xuICB9XG5cbiAgLy8gUmV0cmlldmUgcHJvZmlsZSBpbmZvIGZyb20gdGhlIHBhZ2VcbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5hbWU6IHRoaXMuX25hbWUudGV4dENvbnRlbnQsXG4gICAgICBwcm9mZXNzaW9uOiB0aGlzLl9wcm9mZXNzaW9uLnRleHRDb250ZW50LFxuICAgIH07XG4gIH1cblxuICAvLyBBZGQgbmV3IHByb2ZpbGUgaW5mbyB0byB0aGUgcGFnZVxuICBzZXRVc2VySW5mbyhuYW1lLCBwcm9mZXNzaW9uKSB7XG4gICAgdGhpcy5fbmFtZS50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgdGhpcy5fcHJvZmVzc2lvbi50ZXh0Q29udGVudCA9IHByb2Zlc3Npb247XG4gIH1cblxuICAvLyBTZXQgdXNlciBhdmF0YXJcbiAgc2V0VXNlckF2YXRhcihhdmF0YXIpIHtcbiAgICB0aGlzLl9hdmF0YXIuc3JjID0gYXZhdGFyO1xuICB9XG59XG4iXSwibmFtZXMiOlsiQ2FyZCIsImNvbnN0cnVjdG9yIiwiX3JlZiIsImNhcmRTZWxlY3RvciIsImRhdGEiLCJoYW5kbGVJbWFnZUNsaWNrIiwidGhpcyIsIl9saWtlQnV0dG9uIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiX25hbWUiLCJuYW1lIiwiX2xpbmsiLCJsaW5rIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2VsZW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9oYW5kbGVMaWtlSWNvbiIsIl9oYW5kbGVEZWxldGVDYXJkIiwicmVtb3ZlIiwiX2dldFRlbXBsYXRlIiwiZG9jdW1lbnQiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiZ2V0VmlldyIsImNhcmRJbWFnZSIsInNyYyIsImFsdCIsInRleHRDb250ZW50IiwiRm9ybVZhbGlkYXRvciIsInNldHRpbmdzIiwiZm9ybUVsZW1lbnQiLCJBcnJheSIsImZyb20iLCJfaW5wdXRMaXN0Iiwic29tZSIsIl9jaGVja1ZhbGlkaXR5IiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiX2Zvcm0iLCJxdWVyeVNlbGVjdG9yQWxsIiwiX3N1Ym1pdEJ1dHRvbiIsIl9zaG93SW5wdXRFcnJvciIsImlucHV0RWxlbWVudCIsImVycm9yTWVzc2FnZUVsZW1lbnQiLCJpZCIsImFkZCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2hpZGVJbnB1dEVycm9yIiwiZGlzYWJsZUJ1dHRvbiIsImRpc2FibGVkIiwiX2VuYWJsZUJ1dHRvbiIsIl90b2dnbGVJbnB1dFN0YXRlIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl90b2dnbGVCdXR0b25TdGF0ZSIsIl9oYXNJbnZhbGlkSW5wdXQiLCJmb3JFYWNoIiwiZW5hYmxlVmFsaWRhdGlvbiIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJyZXNldFZhbGlkYXRpb24iLCJTZWN0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX3JlbmRlcmVkSXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwicmVuZGVySXRlbXMiLCJpdGVtIiwiYWRkSXRlbSIsImVsZW1lbnQiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJwcmVwZW5kIiwiYXBwZW5kIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwRWxlbWVudCIsIl9jbG9zZUJ1dHRvbiIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJvcGVuIiwiX3ByZXZpb3VzbHlGb2N1c2VkIiwiYWN0aXZlRWxlbWVudCIsImZvY3VzYWJsZSIsImZvY3VzIiwiY2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwia2V5Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJ0YXJnZXQiLCJjdXJyZW50VGFyZ2V0IiwiUG9wdXBXaXRoSW1hZ2UiLCJzdXBlciIsIl9pbWFnZUVsZW1lbnQiLCJfaW1hZ2VDYXB0aW9uIiwiaW1hZ2VEYXRhIiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJlcnJvclNlbGVjdG9yIiwiX3BvcHVwRm9ybSIsIl9mb3JtSW5wdXRzIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfZXJyb3JFbGVtZW50IiwiX2dldElucHV0VmFsdWVzIiwiaW5wdXRPYmplY3QiLCJpbnB1dCIsInZhbHVlIiwic2V0SW5wdXRWYWx1ZXMiLCJzaG93RXJyb3IiLCJtZXNzYWdlIiwiY2xlYXJFcnJvciIsInJlc2V0IiwiYXBpIiwiZmV0Y2hDYXJkc0Zyb21BbHRlcm5hdGVBcGkiLCJmZXRjaCIsImhlYWRlcnMiLCJhdXRob3JpemF0aW9uIiwidGhlbiIsInJlcyIsImpzb24iLCJiYXNlVXJsIiwiX2Jhc2VVcmwiLCJfaGVhZGVycyIsIl9jaGVja1Jlc3BvbnNlIiwib2siLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiZ2V0VXNlckluZm8iLCJnZXRJbml0aWFsQ2FyZHMiLCJzZXRVc2VySW5mbyIsIl9yZWYyIiwiYWJvdXQiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImFkZENhcmQiLCJfcmVmMyIsImRlbGV0ZUNhcmQiLCJjYXJkSWQiLCJsaWtlQ2FyZCIsInVubGlrZUNhcmQiLCJzZXRVc2VyQXZhdGFyIiwiX3JlZjQiLCJhdmF0YXIiLCJlZGl0QnV0dG9uIiwiYWRkQnV0dG9uIiwicHJvZmlsZUZvcm0iLCJmb3JtcyIsImFkZENhcmRGb3JtIiwiZm9ybVZhbGlkYXRvcnMiLCJmb3JtU2VsZWN0b3IiLCJ2YWxpZGF0b3IiLCJmb3JtTmFtZSIsImdldEF0dHJpYnV0ZSIsImNhcmRQcmV2aWV3UG9wdXAiLCJwb3B1cCIsImluaXRpYWxpemVJbWFnZVBvcHVwIiwiY3JlYXRlQ2FyZCIsImNhcmRTZWN0aW9uIiwiYWxsIiwidXNlckRhdGEiLCJpbml0aWFsQ2FyZHMiLCJ1c2VySW5mbyIsImNhcmRFbGVtZW50IiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwibG9nIiwiYWRkRm9ybVBvcHVwIiwiZm9ybURhdGEiLCJuZXdDYXJkRGF0YSIsIm5ld0NhcmQiLCJuYW1lU2VsZWN0b3IiLCJwcm9mZXNzaW9uU2VsZWN0b3IiLCJhdmF0YXJTZWxlY3RvciIsIl9wcm9mZXNzaW9uIiwiX2F2YXRhciIsInByb2Zlc3Npb24iLCJlZGl0Rm9ybVBvcHVwIiwidmFsdWVzIiwidXBkYXRlZFVzZXIiLCJwcm9maWxlSW5mbyJdLCJzb3VyY2VSb290IjoiIn0=